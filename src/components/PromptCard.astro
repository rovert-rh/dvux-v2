---
interface Props {
    case_number: number;
    title: string;
    prompt: string;
    category: string;
    creator: {
        name: string;
        link: string;
    } | null;
}

const { case_number, title, prompt, category, creator } = Astro.props;
---

<div
    class="prompt-card group bg-gray-900 rounded-xl overflow-hidden shadow-lg hover:shadow-2xl transition-shadow duration-300 flex flex-col justify-between"
    data-title={title}
    data-category={category}
>
    <div class="p-6">
        <div
            class="flex flex-col sm:flex-row sm:items-center sm:justify-between mb-2"
        >
            <span
                class="text-sm font-semibold text-[#EE738F] mb-2 sm:mb-0 inline-block"
            >
                {category}
            </span>
            {
                creator && (
                    <a
                        href={creator.link}
                        target="_blank"
                        rel="noopener noreferrer"
                        class="text-xs text-gray-500 hover:text-white transition-colors duration-200"
                    >
                        Por {creator.name}
                    </a>
                )
            }
        </div>
        <h2 class="text-xl md:text-2xl font-bold text-white mb-2 line-clamp-2">
            {title}
        </h2>
        <p class="text-gray-400 text-sm md:text-base line-clamp-4">
            {prompt}
        </p>
    </div>
    <div
        class="px-6 py-4 border-t border-gray-800 flex items-center justify-between"
    >
        <div class="flex items-center space-x-2">
            <span class="text-sm font-semibold text-gray-500">
                Prompt #{case_number}
            </span>
        </div>
        <button
            class="px-4 py-2 rounded-full text-sm font-bold transition-colors duration-200 bg-[#41B6A1] text-white hover:bg-[#34927b]"
            onclick={`window.copyPrompt(this)`}
            data-prompt={prompt}
        >
            Copiar
        </button>
    </div>
</div>

<style>
    .line-clamp-2 {
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }
    .line-clamp-4 {
        display: -webkit-box;
        -webkit-line-clamp: 4;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }
</style>
